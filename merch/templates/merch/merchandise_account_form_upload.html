{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="{% static 'Scripts/jquery-3.6.3.min.js' %}"></script>
    <link rel="stylesheet" type="text/css" src="{% static 'css/main.css' %}"/>
    <title>Order Form</title>
  </head>

      <style>
      .grad {
        background-image: linear-gradient(#659999,#f4791f);
        background-repeat: no-repeat;
        text-align:center;
      }
    </style>

<body class="grad">
    {% block content %}

    <div >
        <h1 class="jumbotron text-justify" > Upload Form </h1>
    </div>

    <p>
        <button class="btn btn-outline-dark" type="button" data-bs-toggle="collapse" data-bs-target="#upload_div" aria-expanded="false" aria-controls="collapseExample">
        Form
        </button>
    </p>

    <div class="collapse" id="upload_div">
        <main>
          <form method="post" class="text-center mb-4" enctype="multipart/form-data">{% csrf_token %}
            <div style="display: flex; flex-direction: row; flex-wrap: wrap">
              <p><strong id="id_order_{{item.id}}" >Image</strong></p>
                <input id="file" type="file" accept="image/jpeg, image/png, image/jpg" name="fileupload" />
                    <button id="button1" type='button' class="btn btn-outline-success" onclick='triggerUpload("{{ current_merch.id }}")'>Upload</button>
            </div>

              <button type="submit" class="btn btn-success">Upload</button>
              </form>
            <div class="mask rgba-black-strong d-flex justify-content-center align-items-center">
        </div>
      </main>
    </div>

</body>

<script type="text/javascript">

	function triggerUpload(merch_id){


    var preview = document.querySelector('img');
    var file    = document.querySelector('input[type=file]').files[0];
    var reader  = new FileReader();

    reader.onloadend = function () {
    preview.src = reader.result;
  }

        const imgFile = document.getElementById('fileupload');
        uploadImg(merch_id, formData)
        console.log(formData.checkValidity())
	}

    function triggerUnhide(item_id){
       document.getElementById(item_id).removeAttribute("hidden");
       let element = document.getElementById('id_edit_'+item_id);
        element.setAttribute("hidden", "hidden");
    }

</script>
    {% include 'merch/snippets/Upload_form.html' %}
</html>
{% endblock content %}
